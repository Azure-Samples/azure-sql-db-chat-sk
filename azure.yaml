name: azure-sql-db-chat-sk
metadata:
  location: ${AZURE_REGION}
  environment: ${AZURE_ENVIRONMENT}
  subscription: ${AZURE_SUBSCRIPTION_ID}
  clientIpAddress: ${CLIENT_IP_ADDRESS}
  principalName: ${PRINCIPAL_NAME}
workflows:
  up:
    steps:
      - azd: provision
      - azd: deploy
infra:
  bicep: ./infra/main.bicep
hooks:
  preprovision:
    posix:
      shell: sh
      continueOnError: false
      interactive: false
      run: ./infra/azd-hooks/preprovision.sh
    windows:
      shell: pwsh
      continueOnError: false
      interactive: false
      run: ./infra/azd-hooks/preprovision.ps1  
